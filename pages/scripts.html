<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的脚本</title>
    <!-- 引入 PrismJS 基础样式 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    
    <style>
        /* =========================================
           1. CSS 变量定义
           ========================================= */
        :root {
            --bg-body: #ffffff;
            --bg-card: #ffffff;
            --text-main: #000000;
            --text-muted: #666666;
            --border-color: #000000;
            --code-bg: #f4f4f4;
            --hover-bg: #e0e0e0;
            --scrollbar-thumb: #999;
            
            --token-comment: #777;
            --token-string: #444;
            --token-keyword: #000;
            --token-weight: bold;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-body: #121212;
                --bg-card: #000000;
                --text-main: #ffffff;
                --text-muted: #aaaaaa;
                --border-color: #ffffff;
                --code-bg: #1a1a1a;
                --hover-bg: #333333;
                --scrollbar-thumb: #666;

                --token-comment: #999;
                --token-string: #ccc;
                --token-keyword: #fff;
            }
        }

        /* =========================================
           2. 全局基础样式
           ========================================= */
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            transition: background-color 0.3s, color 0.3s;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-weight: 900;
            letter-spacing: -1px;
            border-bottom: 4px solid var(--border-color);
            padding-bottom: 10px;
            display: inline-block;
            left: 50%;
            position: relative;
            transform: translateX(-50%);
        }

        /* =========================================
           3. 代码块卡片样式
           ========================================= */
        .code-card {
            border: 2px solid var(--border-color);
            background-color: var(--bg-card);
            margin-bottom: 30px;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 4px 4px 0px var(--border-color);
            transition: transform 0.2s;
        }

        .code-card:hover {
            transform: translate(-1px, -1px);
            box-shadow: 5px 5px 0px var(--border-color);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 2px solid var(--border-color);
            background-color: var(--bg-card);
            user-select: none;
            cursor: pointer; /* 让头部也可点击折叠 */
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            font-family: "Courier New", Courier, monospace;
        }

        .lang-badge {
            font-size: 0.75rem;
            padding: 2px 6px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            text-transform: uppercase;
            background: var(--bg-body);
        }

        .actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .btn {
            background: none;
            border: 1px solid transparent;
            cursor: pointer;
            color: var(--text-main);
            padding: 4px 8px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .btn:hover {
            background-color: var(--hover-bg);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        /* --- 修复点：将中文句号改回英文点 --- */
        .card-content {
            background-color: var(--code-bg);
            max-height: 2000px; /* 稍微加大一点以适应长代码 */
            overflow: hidden;
            transition: max-height 0.4s ease-out;
            position: relative;
        }

        /* 折叠状态 */
        .code-card.collapsed .card-content {
            max-height: 0;
            border-top: none;
        }
        
        .code-card.collapsed .card-header {
            border-bottom: none;
            transition: border 0.4s;
        }
        .code-card:not(.collapsed) .card-header {
             border-bottom: 2px solid var(--border-color);
        }

        /* 箭头旋转动画 */
        .toggle-icon {
            transition: transform 0.3s;
        }
        .code-card.collapsed .toggle-icon {
            transform: rotate(-90deg);
        }

        pre {
            margin: 0 !important;
            padding: 20px !important;
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--scrollbar-thumb) transparent;
        }

        pre::-webkit-scrollbar {
            height: 8px;
        }
        pre::-webkit-scrollbar-thumb {
            background-color: var(--scrollbar-thumb);
            border-radius: 4px;
        }

        code {
            font-family: "Fira Code", Consolas, Monaco, "Andale Mono", monospace;
            font-size: 13px; /* 稍微调小一点字体适应长代码 */
            text-shadow: none !important;
        }

        /* --- 强制黑白高亮样式 (修复选择器) --- */
        .token.keyword, .token.important, .token.bold {
            color: var(--token-keyword) !important;
            font-weight: var(--token-weight) !important;
            background: none !important;
        }
        .token.string, .token.char {
            color: var(--token-string) !important;
            background: none !important;
        }
        .token.comment, .token.prolog, .token.doctype, .token.cdata {
            color: var(--token-comment) !important;
            font-style: italic;
        }
        .token.number, .token.boolean, .token.constant {
            color: var(--text-main) !important;
        }
        .token.function, .token.class-name {
            color: var(--text-main) !important;
            text-decoration: underline;
            text-decoration-color: var(--text-muted);
        }
        .token.punctuation {
            color: var(--text-muted) !important;
        }
        .token.operator, .token.entity, .token.url {
            color: var(--text-main) !important;
            background: none !important;
        }
        
        @media (max-width: 600px) {
            body { padding: 10px; }
            .file-info span:last-child { 
                max-width: 120px; 
                overflow: hidden; 
                text-overflow: ellipsis; 
                white-space: nowrap; 
            }
            .btn span { display: none; }
            .btn { padding: 6px; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>我的脚本</h1>

    <!-- 1. MiSans.js -->
    <div class="code-card collapsed">
        <div class="card-header">
            <div class="file-info">
                <span class="lang-badge">JS</span>
                <span>MiSans.js</span>
            </div>
            <div class="actions">
                <button class="btn copy-btn" title="Copy Code">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    <span>Copy</span>
                </button>
                <button class="btn toggle-btn" title="Toggle Code">
                    <svg class="toggle-icon" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                </button>
            </div>
        </div>
        <div class="card-content">
            <pre><code class="language-javascript">// ==UserScript==
// @name         终极全局字体替换 (全字重+语言感知) - Merged v22 (Aggressive Latin Boost)
// @namespace    http://tampermonkey.net/
// @version      2025.11.21.aggressive-boost
// @description  [视觉平衡版] 针对 Latin 字符进行“二级加粗”(+2 Levels)，彻底解决中西文混排时西文显细的问题。同时严格保持原网页 CSS 字重数值，避免排版错乱。
// @author       Gemini Advanced (Optimized by User Request)
// @match        *://*/*
// @exclude      *://super.imyaigc.com/*
// @run-at       document-start
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

    // ======================
    // 1. 资源配置
    // ======================
    const CONFIG = {
        BASE_URL: 'https://cdn.jsdelivr.net/npm/misans@4.1.0/lib',
        MAPLE_MONO: 'https://cdn.jsdelivr.net/npm/@alphardex/maple-font@latest/dist/MapleMono-NF-Regular.woff2'
    };
    
    // ... (代码过长，此处为你的 MiSans 完整脚本内容) ...
    // 为节省显示空间，此处省略部分，实际使用请保留你完整的脚本
    
    const fontLoader = new FontLoader();
    function init() {
        fontLoader.loadFonts();
        processNode(document.documentElement);
        document.querySelectorAll('iframe').forEach(processIframe);
        setupObserver();
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }

})();</code></pre>
        </div>
    </div>

    <!-- 2. 思源黑体.js -->
    <div class="code-card collapsed">
        <div class="card-header">
            <div class="file-info">
                <span class="lang-badge">JS</span>
                <span>思源黑体.js</span>
            </div>
            <div class="actions">
                <button class="btn copy-btn" title="Copy Code">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    <span>Copy</span>
                </button>
                <button class="btn toggle-btn" title="Toggle Code">
                    <svg class="toggle-icon" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                </button>
            </div>
        </div>
        <div class="card-content">
            <pre><code class="language-javascript">// ==UserScript==
// @name         终极全局字体替换 (语言感知/JS核心/最终版) - 强制增强版
// @namespace    http://tampermonkey.net/
// @version      2025.11.15.lang-aware.enhanced
// @description  具备语言感知能力，自动为简/繁/日/韩文本匹配最佳字体。
// @author       Gemini Advanced (with user's guidance)
// @match        :///*
// @grant        none
// @run-at       document-start
// ==/UserScript==

(function () {
  "use strict";

  const cssDefinition = `
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
    :host, :root {
        --font-sans-sc: 'Noto Sans SC', 'Source Han Sans CN', sans-serif;
    }
  `;

  // ... (此处为你完整的思源黑体脚本内容) ...
  
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", () => traverseAndApply(document.body));
  } else {
    traverseAndApply(document.body);
  }
})();</code></pre>
        </div>
    </div>

    <!-- 3. 苹方字体.js -->
    <div class="code-card collapsed">
        <div class="card-header">
            <div class="file-info">
                <span class="lang-badge">JS</span>
                <span>苹方字体.js</span>
            </div>
            <div class="actions">
                <button class="btn copy-btn" title="Copy Code">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    <span>Copy</span>
                </button>
                <button class="btn toggle-btn" title="Toggle Code">
                    <svg class="toggle-icon" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                </button>
            </div>
        </div>
        <div class="card-content">
            <pre><code class="language-javascript">// ==UserScript==
// @name Universal Font Replacement v13.3
// @namespace http://tampermonkey.net/
// @version 7.0
// @description v13.3穿透 + v9.7字体注入
// @match *://*/*
// @run-at document-start
// @grant none
// ==/UserScript==

(function () {
  "use strict";

  const PROTECTED_TAGS = new Set(["script", "style", "link", "meta"]);
  // ... (此处为你完整的苹方脚本内容) ...
  
  console.log("[Font v13.3] Initialized.");
})();</code></pre>
        </div>
    </div>

</div>

<!-- PrismJS 脚本 -->
<script src=
